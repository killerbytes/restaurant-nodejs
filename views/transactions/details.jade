extends ../layout

block content
  div.container
    div.d-flex
      h1.display-4 #{title}
      a.btn.btn-primary.ml-auto.align-self-center(href='/transactions') Back
    
    a(href=`/admin`) #{transaction.cart.customer.name}
    div Notes: #{transaction.notes}
    div Order Time: #{ locals.format(transaction.cart.created_at, 'YYYY-MM-DD h:mm:ss A')}
    div Checked Out Time: #{ locals.format(transaction.created_at, 'YYYY-MM-DD h:mm:ss A')}
    - var orders = transaction.cart.orders
    - var total_price = total.price
    - var total_amount_due = total.amount_due
    include ../components/orders

    div Amount: #{transaction.total_price} 
    div Discount #{transaction.discount} 
    div Total Amount Due: #{transaction.total_amount_due} 

    if transaction.cart.void.length
      button(data-toggle="collapse" data-target="#void" class="btn" ) Voided
      div.collapse#void
        - var orders = transaction.cart.void
        table.table
          tr
            th Name
            th.text-right Quantity

          each item in orders
            tr
              td #{item.product.name}
              td.text-right #{item.quantity}
        



